---
applyTo: '**'
---

# Hostinger Compatibility Instructions - Stream Boosters

## Project Information
- **Hosting:** Hostinger Single Plan (Perfect for beginners)
- **Project:** Stream Boosters - Landing page with Astro + React + PHP
- **Architecture:** Astro (SSG) + React (Client) + PHP (Backend) + MySQL
- **Domain:** https://streamboosters.online (to be configured in Hostinger)

## Hostinger Technical Requirements

### Supported Versions
- **PHP:** 7.4, 8.0, 8.1, 8.2, 8.3 (use 8.1+ recommended)
- **MySQL:** 5.7+ / MariaDB 10.3+
- **Node.js:** Available for build, not for runtime
- **SSL:** Free and unlimited included
- **Limits:** 
  - FTP uploads: No limit
  - File Manager: 256 MB per file
  - Automatic Importer: .zip, .tar, .tar.gz (256 MB)
  - **Single Plan:**
    - 1 website
    - 10 GB SSD storage
    - 1 email account (free for 1 year)
    - Weekly backups
    - Free domain (first year)
    - Free SSL
    - Managed WordPress hosting
    - Free website migration

### Hostinger Directory Structure
```
public_html/                    # Domain root directory
├── index.html                  # Main page (generated by Astro)
├── assets/                     # Astro static assets
├── _astro/                     # Astro chunks and resources
├── *.php                       # PHP backend scripts
├── .htaccess                   # Apache configuration
└── other static files
```

## Development Configurations

### 1. Build Configuration (astro.config.mjs)
```javascript
// Ensure Hostinger compatibility
export default defineConfig({
  output: 'static',              // Static mode for Hostinger
  outDir: './dist',              // Output directory
  base: '/',                     // Base path for the domain
  build: {
    assets: 'assets',            // Assets folder
    inlineStylesheets: 'auto',   // Optimization
  },
  integrations: [
    react({
      experimentalReactChildren: true
    }),
    tailwind({
      applyBaseStyles: false,
    })
  ],
  vite: {
    build: {
      assetsInlineLimit: 0,      // Avoid inlining for better cache
      rollupOptions: {
        output: {
          assetFileNames: 'assets/[name].[hash][extname]',
          chunkFileNames: 'assets/[name].[hash].js',
          entryFileNames: 'assets/[name].[hash].js'
        }
      }
    }
  }
});
```

### 2. PHP Configuration
```php
<?php
// Basic configuration for all PHP files
error_reporting(E_ALL);
ini_set('display_errors', 0);  // Disable in production
ini_set('log_errors', 1);
ini_set('error_log', 'php_errors.log');

// Security headers
header('X-Content-Type-Options: nosniff');
header('X-Frame-Options: DENY');
header('X-XSS-Protection: 1; mode=block');

// CORS for forms
header('Access-Control-Allow-Origin: https://yourdomain.com');
header('Access-Control-Allow-Methods: POST, GET, OPTIONS');
header('Access-Control-Allow-Headers: Content-Type');
?>
```

### 3. Database Configuration
```php
<?php
// Database configuration for Hostinger
$host = 'localhost';                    // Always localhost on Hostinger
$dbname = 'u123456789_streambooster';   // Format: u[userid]_[dbname]
$username = 'u123456789_user';          // Format: u[userid]_[username]
$password = 'secure_password';          // Assigned password

try {
    $pdo = new PDO("mysql:host=$host;dbname=$dbname;charset=utf8mb4", 
                   $username, $password, [
        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
        PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
        PDO::ATTR_EMULATE_PREPARES => false,
    ]);
} catch(PDOException $e) {
    error_log("Database connection failed: " . $e->getMessage());
    die("Connection error");
}
?>
```

## Deployment Scripts

### package.json Scripts
```json
{
  "scripts": {
    "dev": "astro dev",
    "build": "astro build",
    "build:hostinger": "astro build && npm run copy:php",
    "copy:php": "cp -r src/php/* dist/",
    "preview": "astro preview",
    "zip:deploy": "cd dist && zip -r ../stream-boosters-deploy.zip . -x '*.DS_Store' '*.git*'",
    "prepare:hostinger": "npm run build:hostinger && npm run zip:deploy"
  }
}
```

### Deployment Workflow
```bash
# 1. Production build
npm run build:hostinger

# 2. Create ZIP for upload
npm run zip:deploy

# 3. Upload via FileZilla or File Manager
# - Extract directly in public_html/
# - Or upload ZIP and extract in Hostinger

# 4. Configure database in hPanel
# - Create MySQL database
# - Create user and assign permissions
# - Import schema if needed
```

## Hostinger Optimizations

### 1. .htaccess Configuration
```apache
# .htaccess for Hostinger
RewriteEngine On

# Force HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# GZIP compression
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

# Cache control
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/svg+xml "access plus 1 month"
</IfModule>

# Security
<Files "*.php">
    Order Allow,Deny
    Allow from all
</Files>

<Files ".env">
    Order Allow,Deny
    Deny from all
</Files>
```

### 2. Error Handling PHP
```php
<?php
// Error handling for production on Hostinger
function handleError($errno, $errstr, $errfile, $errline) {
    error_log("Error [$errno]: $errstr in $errfile on line $errline");
    
    // JSON response for AJAX
    if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && 
        strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest') {
        header('Content-Type: application/json');
        echo json_encode(['error' => 'Internal server error']);
        exit;
    }
    
    // Redirect for page errors
    header('Location: /error.html');
    exit;
}

set_error_handler('handleError');
?>
```

## Testing on Hostinger

### Local Testing (Simulate Hostinger)
```bash
# 1. Local build
npm run build:hostinger

# 2. Serve with PHP (simulate Hostinger)
cd dist
php -S localhost:8080

# 3. Test forms
curl -X POST http://localhost:8080/custom_plan_submit.php \
  -H "Content-Type: application/json" \
  -d '{"test": "data"}'
```

### Pre-Deployment Checks
- [ ] Build completed without errors
- [ ] PHP files copied correctly
- [ ] Absolute paths instead of relative
- [ ] Security headers configured
- [ ] Form validation working
- [ ] Correct JSON responses
- [ ] SSL configured (automatic in Hostinger)
- [ ] Optimized .htaccess

## Common Troubleshooting

### Frequent Errors and Solutions
1. **"Page not found" after deployment**
   - Check that index.html is in public_html/
   - Review .htaccess for redirects

2. **PHP forms not working**
   - Check PHP file permissions (644)
   - Review logs in hPanel > Files > Error Logs

3. **Assets not loading**
   - Check Astro build paths
   - Confirm assets/ exists in public_html/

4. **Database not connecting**
   - Check credentials in hPanel > Databases
   - Use 'localhost' as host
   - Check naming format: u[userid]_[name]

### Logs and Debugging
```bash
# Logs available in Hostinger (hPanel > Files > Logs)
# - Error logs: /public_html/error_log
# - Access logs: /public_html/access_log
# - PHP errors: /public_html/php_errors.log (if configured)
```

## Final Deployment Checklist

### Pre-Deployment
- [ ] `npm run build:hostinger` executed without errors
- [ ] PHP files verified in dist/
- [ ] .htaccess configured
- [ ] Production environment variables set
- [ ] Local tests passing

### During Deployment
- [ ] Upload/extract files to public_html/
- [ ] Configure database in hPanel
- [ ] Check file permissions
- [ ] Configure SSL (automatic)
- [ ] Connectivity test

### Post-Deployment
- [ ] Verify site loads correctly
- [ ] Test forms
- [ ] Review error logs
- [ ] Performance test
- [ ] Set up automatic backups

---

**Note:** Always use Hostinger's 24/7 support (live chat) for specific hosting questions. These procedures are optimized for the Single plan (perfect for beginners).